{%- doc -%}
  Renders a personalisation modal for product customization.

  @param {object} product - The product object
  @param {object} variant - The selected variant
{%- enddoc -%}

{% liquid
  assign product = product | default: closest.product
  assign variant = variant | default: product.selected_or_first_available_variant
  assign product_image = variant.featured_image | default: product.featured_media.preview_image | default: product.featured_image
%}

<personalise-dialog id="personalise-dialog">
  <dialog
    class="personalise-modal dialog-modal"
    ref="dialog"
    scroll-lock
  >
    <button
      ref="closeButton"
      on:click="/closeDialog"
      class="button button-unstyled close-button personalise-modal__close"
      aria-label="{{ 'accessibility.close_dialog' | t }}"
    >
      {{- 'icon-close.svg' | inline_asset_content -}}
    </button>

    <div class="personalise-modal__content">
      <!-- Left Section: Product Preview (40%) -->
      <div class="personalise-modal__preview">
        {% if product_image %}
          {% liquid
            assign image_alt = product.title | escape
          %}
          {{
            product_image
            | image_url: width: 600
            | image_tag: loading: 'lazy', alt: image_alt, class: 'personalise-modal__preview-image'
          }}
        {% else %}
          <div class="personalise-modal__preview-placeholder">
            {{ product.title | escape }}
          </div>
        {% endif %}
      </div>

      <!-- Right Section: Personalisation Form (60%) -->
      <div class="personalise-modal__form">
        <h2 class="personalise-modal__title">
          <span class="personalise-modal__title-icon">
            <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <rect width="17" height="17" fill="url(#pattern0_860_36427)"/>
              <defs>
              <pattern id="pattern0_860_36427" patternContentUnits="objectBoundingBox" width="1" height="1">
              <use xlink:href="#image0_860_36427" transform="scale(0.00195312)"/>
              </pattern>
              <image id="image0_860_36427" width="512" height="512" preserveAspectRatio="none" xlink:href="data:image/png;base64,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"/>
              </defs>
            </svg>

          </span>
          <span>Personalise Your Product</span>
        </h2>

        <p class="personalise-modal__instructions">
          Maximum 9 characters. No special characters.
        </p>

        <div class="personalise-modal__field">
          <label for="personalise-name" class="personalise-modal__label">
            Name (Free Personalisation)
          </label>
          <div class="personalise-modal__input-wrapper">
            <input
              type="text"
              id="personalise-name"
              name="personalise-name"
              class="personalise-modal__input"
              placeholder="Enter the Name or Initials"
              maxlength="9"
              ref="nameInput"
              on:input="/handleNameInput"
            />
            <span class="personalise-modal__counter" ref="charCounter">
              <span ref="charCount">0</span>/9
            </span>
          </div>
        </div>

        <div class="personalise-modal__field">
          <label class="personalise-modal__label">Choose Font Style</label>
          <div class="personalise-modal__font-grid" ref="fontGrid">
            <button
              type="button"
              class="personalise-modal__font-button"
              data-font="Ariel Round"
              ref="fontButton"
              on:click="/selectFont"
            >
              Ariel Round
            </button>
            <button
              type="button"
              class="personalise-modal__font-button"
              data-font="Comic Sans"
              ref="fontButton"
              on:click="/selectFont"
            >
              Comic Sans
            </button>
            <button
              type="button"
              class="personalise-modal__font-button"
              data-font="Playfair Display"
              ref="fontButton"
              on:click="/selectFont"
            >
              Playfair Display
            </button>
            <button
              type="button"
              class="personalise-modal__font-button personalise-modal__font-button--selected"
              data-font="Playball"
              ref="fontButton"
              on:click="/selectFont"
            >
              Playball
            </button>
            <button
              type="button"
              class="personalise-modal__font-button"
              data-font="Roboto Serif"
              ref="fontButton"
              on:click="/selectFont"
            >
              Roboto Serif
            </button>
            <button
              type="button"
              class="personalise-modal__font-button"
              data-font="Helvetica"
              ref="fontButton"
              on:click="/selectFont"
            >
              Helvetica
            </button>
          </div>
        </div>

        <div class="personalise-modal__actions">
          <button
            type="button"
            class="personalise-modal__save-button button button--primary"
            ref="saveButton"
            on:click="/savePersonalisation"
          >
            SAVE PERSONALISATION
          </button>
          <button
            type="button"
            class="personalise-modal__cancel-button button button-unstyled"
            ref="cancelButton"
            on:click="/closeDialog"
          >
            CANCEL
          </button>
        </div>
      </div>
    </div>
  </dialog>
</personalise-dialog>

{% stylesheet %}
  .personalise-modal {
    padding: 0;
    border: var(--style-border-popover);
    border-radius: var(--style-border-radius-popover);
    max-width: 90vw;
    width: 1000px;
    max-height: 90vh;
    overflow: hidden;
    box-shadow: 0 5px 30px rgb(0 0 0 / var(--opacity-15));
    background-color: var(--color-background);
  }

  .personalise-modal[open] {
    display: flex;
    flex-direction: column;
    animation: modalSlideInTop var(--animation-speed) var(--animation-easing) forwards;
  }

  .personalise-modal.dialog-closing {
    animation: modalSlideOutTop var(--animation-speed) var(--animation-easing) forwards;
  }

  .personalise-modal__close {
    position: absolute;
    top: var(--margin-md);
    right: var(--margin-md);
    z-index: var(--layer-raised);
    transition: transform 0.15s var(--animation-timing-bounce);
  }

  .personalise-modal__close:active {
    transform: scale(0.8);
  }

  .personalise-modal__content {
    display: flex;
    height: 100%;
    min-height: 500px;
    overflow: hidden;
  }

  /* Left Section: Preview (40%) */
  .personalise-modal__preview {
    flex: 0 0 40%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--color-background-secondary);
    padding: var(--padding-xl);
    position: relative;
    overflow: hidden;
  }

  .personalise-modal__preview-image {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  .personalise-modal__preview-placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    color: rgb(var(--color-foreground-rgb) / var(--opacity-50));
  }

  /* Right Section: Form (60%) */
  .personalise-modal__form {
    flex: 0 0 60%;
    display: flex;
    flex-direction: column;
    padding: var(--padding-4xl) var(--padding-3xl);
    overflow-y: auto;
  }

  .personalise-modal__title {
    display: flex;
    align-items: center;
    gap: var(--gap-sm);
    font-size: var(--font-size--xl);
    font-weight: 600;
    margin-block-end: var(--margin-xs);
  }

  .personalise-modal__title-icon {
    display: flex;
    align-items: center;
    width: 16px;
    height: 16px;
  }

  .personalise-modal__instructions {
    font-size: var(--font-size--sm);
    color: rgb(var(--color-foreground-rgb) / var(--opacity-70));
    margin-block-end: var(--margin-lg);
  }

  .personalise-modal__field {
    margin-block-end: var(--margin-xl);
  }

  .personalise-modal__label {
    display: block;
    font-size: var(--font-size--base);
    font-weight: 500;
    margin-block-end: var(--margin-sm);
    color: var(--color-foreground);
  }

  .personalise-modal__input-wrapper {
    position: relative;
  }

  .personalise-modal__input {
    width: 100%;
    padding: var(--padding-md);
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    font-size: var(--font-size--base);
    font-family: inherit;
    background-color: var(--color-background);
    color: var(--color-foreground);
    transition: border-color 0.2s ease;
  }

  .personalise-modal__input:focus {
    outline: none;
    border-color: #7295BB;
  }

  .personalise-modal__counter {
    position: absolute;
    bottom: var(--padding-xs);
    right: var(--padding-sm);
    font-size: var(--font-size--xs);
    color: rgb(var(--color-foreground-rgb) / var(--opacity-60));
  }

  .personalise-modal__font-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--gap-sm);
    margin-block-start: var(--margin-sm);
  }

  .personalise-modal__font-button {
    padding: var(--padding-md);
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    background-color: var(--color-background);
    color: rgb(var(--color-foreground-rgb) / var(--opacity-70));
    font-size: var(--font-size--sm);
    font-family: inherit;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .personalise-modal__font-button:hover {
    border-color: #7295BB;
    color: #7295BB;
  }

  .personalise-modal__font-button--selected {
    background-color: #E3F2FD;
    border-color: #7295BB;
    border-width: 2px;
    color: #7295BB;
    font-weight: 500;
  }

  /* Font-specific styles */
  .personalise-modal__font-button[data-font="Playball"] {
    font-family: 'Playball', cursive;
  }

  .personalise-modal__font-button[data-font="Ariel Round"] {
    font-family: 'Arial Rounded MT Bold', sans-serif;
  }

  .personalise-modal__font-button[data-font="Comic Sans"] {
    font-family: 'Comic Sans MS', cursive;
  }

  .personalise-modal__font-button[data-font="Playfair Display"] {
    font-family: 'Playfair Display', serif;
  }

  .personalise-modal__font-button[data-font="Roboto Serif"] {
    font-family: 'Roboto Serif', serif;
  }

  .personalise-modal__font-button[data-font="Helvetica"] {
    font-family: 'Helvetica', sans-serif;
  }

  .personalise-modal__actions {
    display: flex;
    gap: var(--gap-md);
    margin-block-start: auto;
    padding-block-start: var(--padding-xl);
  }

  .personalise-modal__save-button {
    flex: 1;
    background-color: #7295BB;
    color: #ffffff;
    border: none;
    padding: var(--padding-md) var(--padding-lg);
    border-radius: 4px;
    font-weight: 500;
    text-transform: uppercase;
    cursor: pointer;
    transition: background-color 0.2s ease;
  }

  .personalise-modal__save-button:hover:not(:disabled) {
    background-color: #5a7a9a;
  }

  .personalise-modal__save-button:disabled {
    background-color: #cccccc;
    color: #666666;
    cursor: not-allowed;
  }

  .personalise-modal__cancel-button {
    flex: 0 0 auto;
    background-color: transparent;
    border: 1px solid #7295BB;
    color: #7295BB;
    padding: var(--padding-md) var(--padding-lg);
    border-radius: 4px;
    font-weight: 500;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .personalise-modal__cancel-button:hover {
    border-color: #5a7a9a;
    color: #5a7a9a;
  }

  @media screen and (max-width: 749px) {
    .personalise-modal {
      width: 100%;
      max-width: 100vw;
      max-height: 100vh;
      border-radius: 0;
    }

    .personalise-modal__content {
      flex-direction: column;
      min-height: unset;
    }

    .personalise-modal__preview {
      flex: 0 0 40%;
      min-height: 200px;
    }

    .personalise-modal__form {
      flex: 1;
      padding: var(--padding-xl);
    }

    .personalise-modal__font-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .personalise-modal__actions {
      flex-direction: column;
    }

    .personalise-modal__save-button,
    .personalise-modal__cancel-button {
      width: 100%;
    }
  }
{% endstylesheet %}

