{% liquid
  assign max_items = section.settings.max_products | default: 4
  assign items_per_view = section.settings.items_per_view | default: 4
  
  # Get metaobject from metafield custom.cb_more_products
  assign more_products_metaobject = blank
  assign section_heading = blank
  assign section_subheading = blank
  assign products_collection = blank
  assign current_product_id = blank
  
  # Try to get current product ID to exclude it from the list
  if product != blank
    assign current_product_id = product.id
  elsif closest.product != blank
    assign current_product_id = closest.product.id
  endif
  
  # Try collection metafield first (if on collection page)
  if collection != blank
    assign metafield_value = collection.metafields.custom.cb_more_products
    if metafield_value != blank
      assign more_products_metaobject = metafield_value.value
    endif
  endif
  
  # Try product metafield (if on product page)
  if more_products_metaobject == blank and product != blank
    assign metafield_value = product.metafields.custom.cb_more_products
    if metafield_value != blank
      assign more_products_metaobject = metafield_value.value
    endif
  endif
  
  # Try shop metafield (global fallback)
  if more_products_metaobject == blank
    assign metafield_value = shop.metafields.custom.cb_more_products
    if metafield_value != blank
      assign more_products_metaobject = metafield_value.value
    endif
  endif
  
  # Extract heading, subheading, and collection from metaobject
  if more_products_metaobject != blank
    assign section_heading = more_products_metaobject.heading.value | default: more_products_metaobject.heading
    # Try both sub_heading and subheading field names for compatibility
    if more_products_metaobject.sub_heading != blank
      assign section_subheading = more_products_metaobject.sub_heading.value | default: more_products_metaobject.sub_heading
    elsif more_products_metaobject.subheading != blank
      assign section_subheading = more_products_metaobject.subheading.value | default: more_products_metaobject.subheading
    endif
    # Try multiple ways to access the collection from metaobject
    if more_products_metaobject.collection.value != blank
      assign products_collection = more_products_metaobject.collection.value
    elsif more_products_metaobject.collection != blank
      assign products_collection = more_products_metaobject.collection
    endif
  endif
  
  # If no heading/subheading from metaobject, use section settings as fallback
  if section_heading == blank
    assign section_heading = section.settings.top_label
  endif
  if section_subheading == blank
    assign section_subheading = section.settings.section_title
  endif
%}

{% if products_collection != blank and products_collection.products_count > 0 %}
<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<div
  data-testid="explore-more-products"
  class="
    section
    section--{{ section.settings.section_width }}
    color-{{ section.settings.color_scheme }}
    spacing-style
    gap-style
    explore-more-products-section
  "
  style="
    {% render 'spacing-style', settings: section.settings %}
    {% render 'gap-style', value: section.settings.gap %}
  "
>
  <div class="explore-more-products-header">
    {% if section_heading != blank %}
      <div class="explore-more-products-top-label">
        <span class="explore-more-products-top-label-text">{{ section_heading }}</span>
      </div>
    {% endif %}
    
    {% if section_subheading != blank %}
      <div class="explore-more-products-section-title">
        <span class="explore-more-products-section-title-label">{{ section_subheading }}</span>
      </div>
    {% endif %}
  </div>

  {% comment %} Filter products to exclude current viewing product and build list {% endcomment %}
  {% capture list_items %}
    {% if products_collection != blank and products_collection.products_count > 0 %}
      {% assign displayed_count = 0 %}
      {% for product_item in products_collection.products %}
        {% comment %} Skip the current viewing product {% endcomment %}
        {% if current_product_id == blank or product_item.id != current_product_id %}
          {% if displayed_count < max_items %}
            <div class="resource-list__item" data-explore-more-item="true" data-product-id="{{ product_item.id }}">
              {% # theme-check-disable %}
                {% content_for 'block', type: '_product-card', id: 'product-card', closest.product: product_item %}
              {% # theme-check-enable %}
            </div>
            {% assign displayed_count = displayed_count | plus: 1 %}
            {% comment %} Add split marker after each item except potentially the last {% endcomment %}
            {% unless displayed_count >= max_items %}
              <!--@list/split-->
            {% endunless %}
          {% endif %}
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endcapture %}

  {% liquid
    assign list_items_array = list_items | strip | split: '<!--@list/split-->'
    
    # Debug: Check if we have items
    # Remove this after debugging
    # assign debug_count = list_items_array.size
    # assign debug_stripped = list_items | strip
    
    # Prepare carousel settings - remove gutters to allow full width
    assign slideshow_gutters = null
    assign gutter_style = '--gutter-slide-width: 0px;'

    assign show_arrows = false
    if section.settings.icons_style != 'none'
      assign show_arrows = true
    endif
  %}

  {% capture slides %}
    {% for item in list_items_array %}
      {% assign item_stripped = item | strip %}
      {% if item_stripped != blank and item_stripped != '' %}
        {% render 'slideshow-slide'
          index : forloop.index0,
          children : item,
          class : 'resource-list__slide explore-more-products-slide'
        %}
      {% endif %}
    {% endfor %}
  {% endcapture %}

  {% comment %} Desktop carousel {% endcomment %}
  <div class="explore-more-products-wrapper">
    <div
      class="resource-list resource-list__carousel explore-more-products-carousel explore-more-products-desktop"
      style="{{ gutter_style }} --resource-list-column-gap-desktop: {{ section.settings.columns_gap | default: 12 }}px;"
      data-testid="explore-more-products-grid"
      data-items-per-view="{{ items_per_view }}"
    >
      {% render 'slideshow',
        ref: 'exploreMoreProductsDesktop',
        class: 'resource-list__carousel',
        slides: slides,
        show_arrows: show_arrows,
        icon_style: section.settings.icons_style,
        icon_shape: section.settings.icons_shape,
        auto_hide_controls: false,
        infinite: false,
        initial_slide: 0,
        slide_count: list_items_array.size,
        slideshow_gutters: slideshow_gutters,
        arrows_position: 'center'
      %}
    </div>
    <div class="explore-more-products-scrollbar-indicator">
      <div class="explore-more-products-scrollbar-track">
        <div class="explore-more-products-scrollbar-thumb"></div>
      </div>
    </div>
  </div>
</div>
{% endif %}

<style>
  .explore-more-products-header {
    text-align: center;
    margin-bottom: 16px;
  }

  .explore-more-products-top-label {
    text-align: center;
    margin-bottom: 0;
  }

  .explore-more-products-top-label-text {
    margin: 0;
    font-family: 'Sacramento', cursive, sans-serif;
    font-weight: 400;
    font-size: 30px;
    line-height: 150%;
    color: #7295BB;
    text-align: center;
    text-transform: lowercase;
    display: block;
  }

  .explore-more-products-section-title {
    text-align: center;
    margin-bottom: 0;
  }

  .explore-more-products-section-title-label {
    margin: 0;
    font-weight: 500;
    font-size: 24px;
    line-height: 150%;
    text-transform: uppercase;
    color: #1D425A;
    text-align: center;
    display: block;
  }

  @media screen and (min-width: 750px) {
    .explore-more-products-section-title-label {
      font-size: 32px;
    }
  }

  /* Product slider carousel container */
  .explore-more-products-carousel {
    position: relative;
  }

  /* Remove horizontal padding for max width */
  [data-testid="explore-more-products"] .section--page-width {
    padding-inline: 0 !important;
  }

  [data-testid="explore-more-products"] .section--page-width > * {
    padding-inline: 0 !important;
  }

  [data-testid="explore-more-products-grid"] {
    padding-inline: 0 !important;
    --peek-next-slide-size: 0px;
    --gutter-slide-width: 0px !important;
    overflow: visible;
  }

  @media (max-width: 749px) {
    [data-testid="explore-more-products-grid"] {
      padding-inline-start: 0 !important;
      padding-inline-end: 0 !important;
      overflow: visible;
    }
  }

  /* Mobile (max-width: 749px): Show 2 columns like collection pages */
  @media screen and (max-width: 749px) {
    .explore-more-products-desktop .resource-list__carousel {
      --column-count: 2;
      --resource-list-column-gap: 5px;
    }
  }

  /* Tablet (750px - 1024px): Show 3 columns */
  @media screen and (min-width: 750px) and (max-width: 1024px) {
    .explore-more-products-desktop .resource-list__carousel {
      --column-count: 3;
      --resource-list-column-gap: 5px;
      --resource-list-column-gap-desktop: {{ section.settings.columns_gap | default: 12 }}px;
    }

    .explore-more-products-desktop .resource-list__slide {
      width: calc((100% - (var(--resource-list-column-gap-desktop, 8px) * 2)) / 3);
      max-width: calc((100% - (var(--resource-list-column-gap-desktop, 8px) * 2)) / 3);
      flex: 0 0 calc((100% - (var(--resource-list-column-gap-desktop, 8px) * 2)) / 3);
    }
  }

  /* Desktop (min-width: 1025px): Use items_per_view setting */
  @media screen and (min-width: 1025px) {
    .explore-more-products-desktop .resource-list__carousel {
      --column-count: {{ section.settings.items_per_view | default: 4 }};
    }
  }

  /* Ensure gap is applied to slideshow slides */
  .explore-more-products-desktop slideshow-slides {
    gap: 5px;
  }

  @media screen and (min-width: 750px) {
    .explore-more-products-desktop slideshow-slides {
      gap: {{ section.settings.columns_gap | default: 12 }}px;
    }
  }

  /* Ensure product cards use responsive sizing like collection pages */
  [data-testid="explore-more-products-grid"] .resource-list__item {
    min-width: 0;
  }

  /* Position arrows outside the carousel – match Explore More Collections (other-collections-slider) */
  .explore-more-products-wrapper {
    position: relative;
    padding: 0;
  }

  .explore-more-products-desktop slideshow-component {
    overflow: visible;
  }

  .explore-more-products-desktop slideshow-container {
    position: relative;
    overflow: visible;
  }

  .explore-more-products-desktop slideshow-arrows {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: calc(100%);
    pointer-events: none;
    z-index: var(--layer-heightened);
    display: flex !important;
  }

  .explore-more-products-desktop slideshow-arrows[position='center'] {
    justify-content: space-between;
    align-items: center;
    padding: 0;
  }

  .explore-more-products-desktop slideshow-arrows .slideshow-control {
    position: absolute;
    margin: 0;
    pointer-events: auto;
    opacity: 1;
    top: 50%;
    transform: translateY(-50%);
    z-index: var(--layer-heightened);
    transition: opacity 0.3s ease-out;
  }

  .explore-more-products-desktop slideshow-arrows .slideshow-control--previous {
    left: -60px;
  }

  .explore-more-products-desktop slideshow-arrows .slideshow-control--next {
    right: -60px;
  }

  /* Desktop (≥1201px): chevron outline style – match Explore More Collections */
  @media screen and (min-width: 750px) {
    .explore-more-products-section {
      overflow-x: clip;
    }
  }

  @media (min-width: 1201px) {
    .explore-more-products-section .slideshow-control--style-chevron {
      border: 2px solid #7295bb;
    }
    .explore-more-products-section .slideshow-control--style-chevron svg path {
      stroke: #7295bb;
      fill: none;
    }
  }

  /* Tablet (750px–1200px): chevron filled style, arrows at edges – match Explore More Collections */
  @media (min-width: 750px) and (max-width: 1200px) {
    .explore-more-products-desktop slideshow-arrows .slideshow-control--previous {
      left: 0;
    }
    .explore-more-products-desktop slideshow-arrows .slideshow-control--next {
      right: 0;
    }
    .explore-more-products-section .slideshow-control--style-chevron {
      background-color: #7295bb;
    }
    .explore-more-products-section .slideshow-control--style-chevron svg path {
      stroke: #ffffff;
      fill: none;
    }
  }



  @media screen and (min-width: 750px) {
    .explore-more-products-header {
      margin-bottom: 24px;
    }

    .explore-more-products-top-label-text {
      font-size: 38px;
    }
  }

  /* Mobile: Add left padding, keep right edge flush for peek */
  @media screen and (max-width: 749px) {
    /* Break out of page-width grid to touch right edge - only for carousel wrapper */
    [data-testid="explore-more-products"].section--page-width > .explore-more-products-wrapper {
      grid-column: 1 / -1;
      padding-inline-start: var(--page-margin, 16px) !important;
      padding-inline-end: 0 !important;
    }

    /* Keep header in normal grid column */
    [data-testid="explore-more-products"].section--page-width > .explore-more-products-header {
      grid-column: 2;
    }

    .explore-more-products-header {
      margin-bottom: 16px;
    }

    .explore-more-products-wrapper {
      padding: 0;
      padding-inline-start: 0 !important;
      padding-inline-end: 0 !important;
      overflow: visible;
      width: 100%;
    }

    .explore-more-products-desktop slideshow-container {
      overflow: visible;
      width: 100%;
    }

    .explore-more-products-desktop slideshow-arrows {
      display: none !important;
    }

    /* Allow peek of next slide on mobile - touch right edge */
    .explore-more-products-desktop slideshow-component slideshow-slides,
    .explore-more-products-desktop slideshow-component[disabled='true'] slideshow-slides {
      overflow-x: auto !important;
      overflow-y: visible !important;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
      -ms-overflow-style: none;
      scroll-snap-type: x mandatory;
    }


    .explore-more-products-desktop slideshow-slides::-webkit-scrollbar {
      display: none;
      width: 0;
      height: 0;
    }

    /* Add padding after last slide so it doesn't touch edge when scrolled to end - only for main carousel */
    [data-testid="explore-more-products-grid"] > slideshow-component > slideshow-container > slideshow-slides > slideshow-slide:last-child {
      padding-inline-end: var(--page-margin, 16px);
    }

    /* Ensure card-gallery can scroll on mobile - allow overflow for product image scrolling */
    [data-testid="explore-more-products-grid"] .card-gallery slideshow-slides {
      overflow-x: auto !important;
      -webkit-overflow-scrolling: touch;
    }

    /* Custom scrollbar indicator */
    .explore-more-products-scrollbar-indicator {
      width: auto;
      max-width: calc(100% - var(--page-margin, 16px));
      height: 4px;
      position: relative;
      margin-top: 37px;
      margin-right: var(--page-margin, 16px);
      box-sizing: border-box;
    }

    .explore-more-products-scrollbar-track {
      width: 100%;
      height: 4px;
      background-color: #EEEEEE;
      border-radius: 10px;
      position: relative;
      overflow: hidden;
    }

    .explore-more-products-scrollbar-thumb {
      height: 4px;
      background-color: #7295BB;
      border-radius: 10px;
      position: absolute;
      left: 0;
      top: 0;
      transition: width 0.1s ease-out;
      min-width: 20px;
      cursor: grab;
      user-select: none;
    }

    .explore-more-products-scrollbar-thumb:active {
      cursor: grabbing;
    }

    .explore-more-products-scrollbar-track {
      cursor: pointer;
    }
  }

  /* Hide scrollbar indicator on desktop */
  @media screen and (min-width: 750px) {
    .explore-more-products-scrollbar-indicator {
      display: none !important;
    }
  }

  /* Ensure card-gallery slider works properly - enable hover and arrows */
  [data-testid="explore-more-products-grid"] .card-gallery {
    pointer-events: auto;
  }

  [data-testid="explore-more-products-grid"] .card-gallery slideshow-component {
    pointer-events: auto;
  }

  /* Ensure slideshow slides can be scrolled even when disabled */
  [data-testid="explore-more-products-grid"] .card-gallery slideshow-component[disabled='true'] slideshow-slides {
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
  }

  /* Desktop: Enable hover image change and arrows */
  @media screen and (min-width: 750px) {
    [data-testid="explore-more-products-grid"] .card-gallery slideshow-component[disabled='true'] slideshow-slides {
      overflow-x: auto !important;
      cursor: grab;
    }

    [data-testid="explore-more-products-grid"] .card-gallery slideshow-component[disabled='true'] slideshow-slides:active {
      cursor: grabbing;
    }
  }
</style>

<script>
  // Custom scrollbar indicator for mobile
  document.addEventListener('DOMContentLoaded', function() {
    function setupScrollbar() {
      const grid = document.querySelector('[data-testid="explore-more-products-grid"]');
      if (!grid) return;
      
      const slides = grid.querySelector('.explore-more-products-desktop slideshow-component slideshow-slides') || 
                     grid.querySelector('.explore-more-products-desktop slideshow-slides');
      const scrollbarThumb = document.querySelector('.explore-more-products-scrollbar-thumb');
      const scrollbarIndicator = document.querySelector('.explore-more-products-scrollbar-indicator');
      
      if (!slides || !scrollbarThumb || !scrollbarIndicator) return;

    function updateScrollbar() {
      // Only show on mobile
      if (window.innerWidth > 749) {
        scrollbarIndicator.style.display = 'none';
        return;
      }

      const scrollLeft = slides.scrollLeft;
      const scrollWidth = slides.scrollWidth;
      const clientWidth = slides.clientWidth;
      const maxScroll = scrollWidth - clientWidth;
      
      if (maxScroll <= 0) {
        scrollbarIndicator.style.display = 'none';
        return;
      }
      
      scrollbarIndicator.style.display = 'block';
      
      // Calculate thumb width and position
      const thumbWidth = (clientWidth / scrollWidth) * 100;
      const thumbPosition = (scrollLeft / maxScroll) * (100 - thumbWidth);
      
      scrollbarThumb.style.width = thumbWidth + '%';
      scrollbarThumb.style.left = thumbPosition + '%';
    }

      // Update on scroll
      slides.addEventListener('scroll', updateScrollbar);
      
      // Update on resize
      const resizeObserver = new ResizeObserver(updateScrollbar);
      resizeObserver.observe(slides);
      
      window.addEventListener('resize', updateScrollbar);
      
      // Initial update
      updateScrollbar();
      
      // Update periodically to catch any changes
      setInterval(updateScrollbar, 100);

      // Make scrollbar interactive - click on track to jump
      const scrollbarTrack = scrollbarIndicator.querySelector('.explore-more-products-scrollbar-track');
      if (scrollbarTrack) {
        scrollbarTrack.addEventListener('click', function(e) {
          if (window.innerWidth > 749) return;
          
          const trackRect = scrollbarTrack.getBoundingClientRect();
          const clickX = e.clientX - trackRect.left;
          const trackWidth = trackRect.width;
          const percentage = clickX / trackWidth;
          
          const scrollWidth = slides.scrollWidth;
          const clientWidth = slides.clientWidth;
          const maxScroll = scrollWidth - clientWidth;
          const targetScroll = percentage * maxScroll;
          
          slides.scrollTo({
            left: targetScroll,
            behavior: 'smooth'
          });
        });
      }

      // Make scrollbar thumb draggable
      let isDragging = false;
      let startX = 0;
      let startScrollLeft = 0;

      const handleMouseMove = function(e) {
        if (!isDragging || window.innerWidth > 749) return;
        
        const scrollbarTrack = scrollbarIndicator.querySelector('.explore-more-products-scrollbar-track');
        if (!scrollbarTrack) return;
        
        const trackRect = scrollbarTrack.getBoundingClientRect();
        const deltaX = e.clientX - startX;
        const trackWidth = trackRect.width;
        const scrollWidth = slides.scrollWidth;
        const clientWidth = slides.clientWidth;
        const maxScroll = scrollWidth - clientWidth;
        const scrollRatio = maxScroll / trackWidth;
        const newScrollLeft = startScrollLeft + (deltaX * scrollRatio);
        
        slides.scrollLeft = Math.max(0, Math.min(maxScroll, newScrollLeft));
      };

      const handleMouseUp = function() {
        isDragging = false;
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
      };

      scrollbarThumb.addEventListener('mousedown', function(e) {
        if (window.innerWidth > 749) return;
        isDragging = true;
        startX = e.clientX;
        startScrollLeft = slides.scrollLeft;
        e.preventDefault();
        document.addEventListener('mousemove', handleMouseMove);
        document.addEventListener('mouseup', handleMouseUp);
      });

      // Touch support for mobile
      const handleTouchMove = function(e) {
        if (!isDragging || window.innerWidth > 749) return;
        
        const scrollbarTrack = scrollbarIndicator.querySelector('.explore-more-products-scrollbar-track');
        if (!scrollbarTrack) return;
        
        const trackRect = scrollbarTrack.getBoundingClientRect();
        const deltaX = e.touches[0].clientX - startX;
        const trackWidth = trackRect.width;
        const scrollWidth = slides.scrollWidth;
        const clientWidth = slides.clientWidth;
        const maxScroll = scrollWidth - clientWidth;
        const scrollRatio = maxScroll / trackWidth;
        const newScrollLeft = startScrollLeft + (deltaX * scrollRatio);
        
        slides.scrollLeft = Math.max(0, Math.min(maxScroll, newScrollLeft));
      };

      const handleTouchEnd = function() {
        isDragging = false;
        document.removeEventListener('touchmove', handleTouchMove);
        document.removeEventListener('touchend', handleTouchEnd);
      };

      scrollbarThumb.addEventListener('touchstart', function(e) {
        if (window.innerWidth > 749) return;
        isDragging = true;
        startX = e.touches[0].clientX;
        startScrollLeft = slides.scrollLeft;
        e.preventDefault();
        document.addEventListener('touchmove', handleTouchMove);
        document.addEventListener('touchend', handleTouchEnd);
      });
    }

    // Try multiple times to catch dynamically loaded content
    setupScrollbar();
    setTimeout(setupScrollbar, 500);
    setTimeout(setupScrollbar, 1500);
  });
</script>


{% schema %}
{
  "name": "Explore More Products",
  "class": "ui-test-explore-more-products",
  "blocks": [
    {
      "type": "@theme"
    },
    {
      "type": "@app"
    },
    {
      "type": "_divider"
    },
    {
      "type": "_product-card"
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "top_label",
      "label": "Top Label (Fallback)",
      "default": "explore",
      "info": "Text displayed above the section title. This is used as fallback if not provided in the metaobject."
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title (Fallback)",
      "default": "EXPLORE MORE PRODUCTS",
      "info": "Title displayed above the product slider. This is used as fallback if not provided in the metaobject."
    },
    {
      "type": "header",
      "content": "Content Source"
    },
    {
      "type": "paragraph",
      "content": "Products are automatically loaded from the metafield 'custom.cb_more_products' which is a metaobject with handle 'explore'. The metaobject should have 'heading', 'subheading', and 'collection' fields. The metafield can be set on the current collection, product, or shop level. The current viewing product will be automatically excluded from the list."
    },
    {
      "type": "header",
      "content": "Slider Settings"
    },
    {
      "type": "range",
      "id": "items_per_view",
      "label": "Items per view",
      "min": 1,
      "max": 8,
      "step": 1,
      "default": 4,
      "info": "Number of products to show at once in the slider"
    },
    {
      "type": "range",
      "id": "max_products",
      "label": "Maximum products",
      "min": 1,
      "max": 20,
      "step": 1,
      "default": 8,
      "info": "Maximum number of products to display"
    },
    {
      "type": "range",
      "id": "columns_gap",
      "label": "Horizontal Gap",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "checkbox",
      "id": "quick_add",
      "label": "Enable quick add",
      "default": true,
      "info": "Show the quick add button (+) on product cards"
    },
    {
      "type": "select",
      "id": "icons_style",
      "label": "Arrow Style",
      "options": [
        {
          "value": "arrow",
          "label": "Arrows"
        },
        {
          "value": "chevron",
          "label": "Chevrons"
        },
        {
          "value": "arrows_large",
          "label": "Large Arrows"
        },
        {
          "value": "chevron_large",
          "label": "Large Chevrons"
        },
        {
          "value": "blue_arrows",
          "label": "Blue arrows"
        },
        {
          "value": "none",
          "label": "None"
        }
      ],
      "default": "chevron"
    },
    {
      "type": "select",
      "id": "icons_shape",
      "label": "Arrow Background",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "circle",
          "label": "Circle"
        },
        {
          "value": "square",
          "label": "Square"
        }
      ],
      "default": "circle",
      "visible_if": "{{ section.settings.icons_style != 'none' }}"
    },
    {
      "type": "header",
      "content": "Section Layout"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Width",
      "options": [
        {
          "value": "page-width",
          "label": "Page"
        },
        {
          "value": "full-width",
          "label": "Full"
        }
      ],
      "default": "page-width"
    },
    {
      "type": "range",
      "id": "gap",
      "label": "Gap",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "Top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "Bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 48
    }
  ],
  "presets": [
    {
      "name": "Explore More Products",
      "category": "Products",
      "settings": {
        "top_label": "explore",
        "section_title": "EXPLORE MORE PRODUCTS",
        "items_per_view": 4,
        "max_products": 8,
        "columns_gap": 12,
        "quick_add": true,
        "icons_style": "chevron",
        "icons_shape": "circle",
        "section_width": "page-width",
        "gap": 12,
        "color_scheme": "scheme-1",
        "padding-block-start": 48,
        "padding-block-end": 48
      },
      "blocks": {
        "product-card": {
          "type": "_product-card",
          "name": "Product Card",
          "static": true,
          "settings": {
            "product_card_gap": 4,
            "inherit_color_scheme": true,
            "color_scheme": "",
            "border": "none",
            "border_width": 1,
            "border_opacity": 100,
            "border_radius": 0,
            "padding-block-start": 0,
            "padding-block-end": 0,
            "padding-inline-start": 0,
            "padding-inline-end": 0,
            "show_view_product_button": true
          },
          "blocks": {
            "card-gallery": {
              "type": "_product-card-gallery",
              "name": "Product Card Media",
              "settings": {
                "image_ratio": "square",
                "border": "none",
                "border_width": 1,
                "border_opacity": 100,
                "border_radius": 0,
                "padding-block-start": 0,
                "padding-block-end": 0,
                "padding-inline-start": 0,
                "padding-inline-end": 0
              }
            },
            "product_title_4nY4eT": {
              "type": "product-title",
              "name": "t:names.product_title",
              "settings": {
                "width": "100%",
                "max_width": "normal",
                "alignment": "left",
                "type_preset": "rte",
                "font": "var(--font-body--family)",
                "font_size": "1rem",
                "line_height": "normal",
                "letter_spacing": "normal",
                "case": "none",
                "wrap": "pretty",
                "color": "var(--color-foreground)",
                "background": false,
                "background_color": "#00000026",
                "corner_radius": 0,
                "padding-block-start": 4,
                "padding-block-end": 0,
                "padding-inline-start": 0,
                "padding-inline-end": 0
              }
            },
            "price_EzJzMm": {
              "type": "price",
              "name": "Product Price",
              "settings": {
                "show_sale_price_first": true,
                "show_installments": false,
                "show_tax_info": false,
                "type_preset": "h6",
                "width": "100%",
                "alignment": "left",
                "font": "var(--font-body--family)",
                "font_size": "1rem",
                "line_height": "normal",
                "letter_spacing": "normal",
                "case": "none",
                "color": "var(--color-foreground)",
                "padding-block-start": 0,
                "padding-block-end": 0,
                "padding-inline-start": 0,
                "padding-inline-end": 0
              }
            }
          },
          "block_order": ["card-gallery", "product_title_4nY4eT", "price_EzJzMm"]
        }
      },
      "block_order": []
    }
  ]
}
{% endschema %}
