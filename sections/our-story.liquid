
<div
  class="section section--{{ section.settings.section_width }} disable-section-top-offset our-story spacing-style"
  style="
    {%- render 'spacing-style', settings: section.settings %}
    {% render 'border-override', settings: section.settings %}
  "
>
  <div class="our-story__container color-{{ section.settings.color_scheme }}">
    {% if section.settings.image != blank %}
      <div class="our-story__image">
        {{
          section.settings.image
          | image_url: width: 2000
          | image_tag: loading: 'lazy', class: 'our-story__image-element'
        }}
      </div>
    {% endif %}

    <div class="our-story__content">
      {% if section.settings.logo != blank %}
        <div class="our-story__logo">
          {{
            section.settings.logo
            | image_url: width: 200
            | image_tag: loading: 'lazy', class: 'our-story__logo-element'
          }}
        </div>
      {% endif %}

      {% if section.settings.title_prefix != blank or section.settings.title != blank %}
        <h2 class="our-story__title">
          {% if section.settings.title_prefix != blank %}
            <span class="our-story__title-prefix">{{ section.settings.title_prefix }}</span>
          {% endif %}
          {% if section.settings.title != blank %}
            <span class="our-story__title-main">{{ section.settings.title }}</span>
          {% endif %}
        </h2>
      {% endif %}

      {% if section.settings.body != blank %}
        <div class="our-story__body rte">
          {{ section.settings.body }}
        </div>
      {% endif %}

      {% if section.settings.name != blank %}
        <div class="our-story__name">{{ section.settings.name }}</div>
      {% endif %}
    </div>
  </div>
</div>

{% stylesheet %}
  .our-story.section--page-width > * {
    grid-column: 1 / -1;
  }

  /* Desktop - constrain to page width when side-by-side */
  @media screen and (min-width: 1200px) {
    .our-story.section--page-width > * {
      grid-column: 2;
    }
  }

  .our-story__container {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    /* Break out to touch edges on mobile/stacked layout */
    width: 100vw;
    position: relative;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
  }

  /* Keep stacked layout until there's enough space for side-by-side */
  /* Desktop - side-by-side layout */
  @media screen and (min-width: 1200px) {
    .our-story__container {
      flex-direction: row;
      align-items: flex-start;
      /* Reset mobile edge-to-edge styles on desktop */
      width: auto;
      position: static;
      left: auto;
      right: auto;
      margin-left: 0;
      margin-right: 0;
    }
  }

  /* Mobile - ensure image fills full width */
  .our-story__image {
    width: 100%;
    min-width: 100%;
    overflow: hidden;
    /* No max-width or max-height on mobile - image should touch edges */
    max-width: 100%;
    flex-shrink: 0;
  }

  /* Desktop - ensure image maintains size in side-by-side layout */
  @media screen and (min-width: 1200px) {
    .our-story__image {
      flex: 0 0 614px;
      width: 614px;
      min-width: 614px;
      max-width: 614px;
      max-height: 546px;
    }
  }

  .our-story__image-element {
    width: 100%;
    height: auto;
    display: block;
    object-fit: cover;
  }

  /* Desktop - constrain image element */
  @media screen and (min-width: 1200px) {
    .our-story__image-element {
      height: 546px;
      object-fit: cover;
    }
  }

  .our-story__content {
    display: flex;
    flex-direction: column;
    padding: 16px var(--page-margin);
    position: relative;
    width: 100%;
  }

  /* Keep mobile padding until desktop breakpoint */
  @media screen and (min-width: 750px) {
    .our-story__content {
      padding: 16px var(--page-margin);
    }
  }

  /* Desktop - side-by-side layout with full padding */
  @media screen and (min-width: 1200px) {
    .our-story__content {
      padding: 30px 82px 30px 71px;
      width: auto;
      flex: 1;
      min-width: 0;
    }
  }

  .our-story__logo {
    display: none;
  }

  /* Desktop - show logo in side-by-side layout */
  @media screen and (min-width: 1200px) {
    .our-story__logo {
      display: block;
      position: absolute;
      top: 21px;
      right: 45px;
    }
  }

  .our-story__logo-element {
    max-width: 100px;
    height: auto;
    display: block;
  }

  .our-story__title {
    margin: 0 0 11px 0;
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  @media screen and (min-width: 750px) {
    .our-story__title {
      margin-bottom: 24px;
    }
  }

  .our-story__title-prefix {
    font-family: 'Sacramento', cursive;
    font-weight: 400;
    font-size: 30px;
    line-height: 0.9;
    color: #7295BB;
  }

  @media screen and (min-width: 750px) {
    .our-story__title-prefix {
      font-size: 38px;
    }
  }

  .our-story__title-main {
    font-family: 'FuturaPT-Demi', 'Outfit', sans-serif;
    font-weight: 500;
    font-size: 28px;
    line-height: 150%;
    text-transform: uppercase;
    margin-left: 0.5em;
  }

  .our-story__body {
    font-weight: 400;
    font-size: 16px;
    line-height: 150%;
    margin-bottom: 19px;
  }

  @media screen and (min-width: 750px) {
    .our-story__body {
      font-size: 18px;
      margin-bottom: 16px;
    }
  }

  .our-story__body p {
    margin: 0 0 1rem 0;
  }

  .our-story__body p:last-child {
    margin-bottom: 0;
  }

  .our-story__name {
    font-family: 'Sacramento', cursive;
    font-weight: 400;
    font-size: 30px;
    line-height: 140%;
    margin-top: 0.5rem;
    color: #7295BB;
  }

  @media screen and (min-width: 750px) {
    .our-story__name {
      font-size: 26px;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Our Story",
  "tag": "section",
  "class": "our-story-wrapper section-wrapper",
  "disabled_on": {
    "groups": ["header"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo",
      "info": "Logo appears in the top right of content (desktop only)"
    },
    {
      "type": "text",
      "id": "title_prefix",
      "label": "Title prefix",
      "info": "This text will use a different font family (e.g., 'from')",
      "default": "from"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Our Family, To Yours"
    },
    {
      "type": "richtext",
      "id": "body",
      "label": "Body",
      "default": "<p>Tell your story here. This is a great place to share the history of your brand or business.</p>"
    },
    {
      "type": "text",
      "id": "name",
      "label": "Name",
      "default": "Author Name"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section width",
      "options": [
        {
          "value": "page-width",
          "label": "Page width"
        },
        {
          "value": "full-width",
          "label": "Full width"
        }
      ],
      "default": "page-width"
    },
    {
      "type": "header",
      "content": "Appearance"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "Top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "Bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 48
    }
  ],
  "presets": [
    {
      "name": "Our Story",
      "category": "Text",
      "settings": {
        "title_prefix": "from",
        "title": "Our Family, To Yours",
        "body": "<p>Tell your story here. This is a great place to share the history of your brand or business.</p>",
        "name": "Author Name"
      }
    }
  ]
}
{% endschema %}

