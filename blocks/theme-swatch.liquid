{% liquid
  assign block_settings = block.settings
%}

<div class="theme-swatch-item" {{ block.shopify_attributes }}>
  {% if block_settings.link_url != blank %}
    <a
      href="{{ block_settings.link_url }}"
      class="theme-swatch-link"
      {% if block_settings.link_text != blank %}
        aria-label="{{ block_settings.link_text }}"
      {% endif %}
    >
      <div class="theme-swatch-image-wrapper">
        {% if block_settings.image %}
          {{
            block_settings.image
            | image_url: width: 400
            | image_tag: 
              loading: 'lazy', 
              class: 'theme-swatch-image',
              sizes: '200px'
          }}
        {% else %}
          <div class="theme-swatch-placeholder"></div>
        {% endif %}
      </div>
      {% if block_settings.link_text != blank %}
        <span class="theme-swatch-title">{{ block_settings.link_text }}</span>
      {% endif %}
    </a>
  {% else %}
    <div class="theme-swatch-link">
      <div class="theme-swatch-image-wrapper">
        {% if block_settings.image %}
          {{
            block_settings.image
            | image_url: width: 400
            | image_tag: 
              loading: 'lazy', 
              class: 'theme-swatch-image',
              sizes: '200px'
          }}
        {% else %}
          <div class="theme-swatch-placeholder"></div>
        {% endif %}
      </div>
      {% if block_settings.link_text != blank %}
        <span class="theme-swatch-title">{{ block_settings.link_text }}</span>
      {% endif %}
    </div>
  {% endif %}
</div>

{% stylesheet %}
  .theme-swatch-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .theme-swatch-link {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    color: inherit;
    width: 100%;
  }

  .theme-swatch-link:hover .theme-swatch-title {
    color: #6688AE;
    text-decoration: underline;
    text-decoration-color: currentColor;
    text-decoration-thickness: 0.075em;
    text-underline-offset: 0.125em;
  }

  .theme-swatch-image-wrapper {
    overflow: hidden;
    margin-bottom: var(--padding-xs);
    position: relative;
    flex-shrink: 0;
  }

  .theme-swatch-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .theme-swatch-placeholder {
    width: 100%;
    height: 100%;
    background-color: var(--color-foreground-muted);
    opacity: 0.1;
  }

  .theme-swatch-title {
    font-family: 'Outfit', sans-serif;
    font-weight: 500;
    font-size: 12px;
    line-height: 160%;
    text-transform: uppercase;
    color: var(--color-foreground);
    text-align: center;
    margin-top: var(--padding-2xs);
  }

  @media screen and (min-width: 750px) {
    .theme-swatch-title {
      font-size: 16px;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Theme Swatch",
  "tag": null,
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Swatch Image"
    },
    {
      "type": "text",
      "id": "link_text",
      "label": "Link Text",
      "default": "Theme Name"
    },
    {
      "type": "url",
      "id": "link_url",
      "label": "Link URL"
    }
  ],
  "presets": [
    {
      "name": "Theme Swatch",
      "category": "Custom"
    }
  ]
}
{% endschema %}